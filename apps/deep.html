<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Cypress in deep</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
        div {
            border: 1px solid red;
            margin: 5px 0;
            padding: 5px;
        }
    </style>
    <script>
        function like() {
            const section = document.querySelector('section[data-cy=like]');
            const button = section.querySelector('button');
            button.disabled = true;
            button.innerHTML = 'Processing 5 sec...';

            setTimeout(() => {
                const success = document.createElement('div');
                success.setAttribute('data-cy', 'success');
                success.innerHTML = 'Well done!';
                section.appendChild(success);

                section.removeChild(button);
            }, 5000);
        }

        function tree() {
            const section = document.querySelector('section[data-cy=tree]');
            const button = section.querySelector('button');
            button.disabled = true;
            button.innerHTML = 'Processing...';

            setTimeout(() => {
                section.innerHTML = `<div data-cy="daddy">I am daddy</div>`;

                setTimeout(() => {
                    section.innerHTML = `<div data-cy="daddy">
                        I am new daddy
                        <div data-cy="child">I am child</div>
                    </div>`;
                }, 1000);
            }, 1000);
        }
    </script>
</head>

<body>

    <h1>Long like</h1>
    <section data-cy="like">
        <button type="button" onclick="like()">Like</button>
    </section>

    <h1>Rebuild elements tree</h1>
    <section data-cy="tree">
        <button type="button" onclick="tree()">Start tree</button>
    </section>

</body>

</html>